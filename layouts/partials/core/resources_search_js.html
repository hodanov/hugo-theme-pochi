{{/* Loads search vendor libraries (Fuse + Mark) via Hugo Pipes if present.
  Falls back to CDN scripts when local vendor files are unavailable.
*/}}
{{ $fuse := resources.Get "js/vendor/fuse.js" }}
{{ $mark := resources.Get "js/vendor/mark.js" }}
{{ if and $fuse $mark }}
  {{ $vendor := slice $fuse $mark | resources.Concat "js/vendor-search.js" | resources.Minify | fingerprint }}
  <script defer src="{{ $vendor.RelPermalink }}"></script>
{{ else }}
  {{/* Fallback: keep prior CDN includes to avoid breaking search before vendoring */}}
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.6.2/fuse.min.js"
    integrity="sha512-Nqw1tH3mpavka9cQCc5zWWEZNfIPdOYyQFjlV1NvflEtQ0/XI6ZQ+H/D3YgJdqSUJlMLAPRj/oXlaHCFbFCjoQ=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
    defer
  ></script>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js"
    integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
    defer
  ></script>
{{ end }}
